{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Keep â€œNoâ€ button persistent and loop NO_MESSAGES indefinitely on Opening Screen",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Ensure the â€œNoâ€ button never disappears, remains always visible/clickable, and keeps jumping to a safe random in-viewport position on every click until the Opening Screen unmounts.",
      "acceptanceCriteria": [
        "On the Opening Screen, repeatedly clicking the â€œNoâ€ button 50+ times never causes it to disappear or become unclickable.",
        "Each click on â€œNoâ€ results in the button moving to a new random position.",
        "The new â€œNoâ€ button position is always fully within the visible viewport (with padding) and never renders partially off-screen.",
        "Viewport changes (resize/orientation change) do not cause the â€œNoâ€ button to end up off-screen; it is re-clamped to a safe visible position.",
        "Pressing â€œYes! ğŸ’–â€ transitions away from the Opening Screen and stops the â€œNoâ€ behavior because the Opening Screen is no longer active.",
        "All other Opening Screen visuals and behavior remain unchanged (styling, layout, animations, copy)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/valentine/NoButton.tsx",
          "operation": "modify",
          "description": "Harden the No button positioning logic so it can loop indefinitely without ever placing the button off-screen: compute safe min/max positions using current button dimensions and the active viewport, generate positions strictly within bounds (with padding), and re-clamp the current position on resize/orientation changes. Ensure the click handler continues to trigger movement on every click and that no state/logic causes the button to stop repositioning or become non-rendered during long interaction sequences."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Make the Opening Screenâ€™s alternate message loop through existing NO_MESSAGES infinitely while the Opening Screen is active, stopping cleanly when the screen unmounts after â€œYes! ğŸ’–â€.",
      "acceptanceCriteria": [
        "After at least one â€œNoâ€ interaction triggers the alternate messages, the message continues to cycle through NO_MESSAGES and wraps back to the start without stopping while the Opening Screen is displayed.",
        "The message cycling does not stop after any number of â€œNoâ€ presses.",
        "When the user presses â€œYes! ğŸ’–â€ and the app transitions away from the Opening Screen, message cycling stops (no timers/intervals continue running in the background).",
        "All user-facing text remains in English and uses the existing strings in constants.ts (no copy changes unless required to enable looping behavior)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/valentine/OpeningScreen.tsx",
          "operation": "modify",
          "description": "Add an infinite looping mechanism for the NO_MESSAGES once the user has clicked â€œNoâ€ at least once: start a timer-driven cycle that advances messageIndex and wraps modulo NO_MESSAGES.length while the Opening Screen remains mounted, and fully clean up timers on unmount and when looping is not active. Keep existing strings from constants.ts and preserve all current visuals/structure (including the initial question + sparkle behavior before any No clicks)."
        }
      ]
    }
  ]
}